<?php
/**
 * Arquivo de Configuração do ERP INLAUDO
 * 
 * IMPORTANTE: Renomeie este arquivo para config.php e configure com suas credenciais
 */

// Configurações do Banco de Dados
define('DB_HOST', 'localhost');
define('DB_NAME', 'inlaud99_erpinlaudo');
define('DB_USER', 'inlaud99_admin');
define('DB_PASS', 'SUA_SENHA_AQUI');

// Configurações do Sistema
define('SITE_URL', 'http://seudominio.com');
define('SITE_NAME', 'ERP INLAUDO');

// Timezone
date_default_timezone_set('America/Sao_Paulo');

// Exibir erros (desabilite em produção)
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

/**
 * Função para obter conexão com o banco de dados
 * 
 * @return PDO
 */
function getConnection() {
    try {
        $conn = new PDO(
            "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8mb4",
            DB_USER,
            DB_PASS,
            [
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES => false
            ]
        );
        return $conn;
    } catch (PDOException $e) {
        die("Erro de conexão com o banco de dados: " . $e->getMessage());
    }
}

/**
 * Função para sanitizar entrada de dados
 * 
 * @param string $data
 * @return string
 */
function sanitize($data) {
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data, ENT_QUOTES, 'UTF-8');
    return $data;
}

/**
 * Função para formatar valor monetário
 * 
 * @param float $valor
 * @return string
 */
function formatarMoeda($valor) {
    return 'R$ ' . number_format($valor, 2, ',', '.');
}

/**
 * Função para formatar data brasileira
 * 
 * @param string $data Data no formato Y-m-d
 * @return string Data no formato d/m/Y
 */
function formatarData($data) {
    if (empty($data) || $data == '0000-00-00') {
        return '';
    }
    return date('d/m/Y', strtotime($data));
}

/**
 * Função para formatar data e hora brasileira
 * 
 * @param string $dataHora Data/hora no formato Y-m-d H:i:s
 * @return string Data/hora no formato d/m/Y H:i
 */
function formatarDataHora($dataHora) {
    if (empty($dataHora) || $dataHora == '0000-00-00 00:00:00') {
        return '';
    }
    return date('d/m/Y H:i', strtotime($dataHora));
}
?>
